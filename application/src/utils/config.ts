import path from 'path';
import * as dotenv from 'dotenv' // see https://github.com/motdotla/dotenv#how-do-i-use-dotenv-with-import

dotenv.config()

/**
 * envOrDefault() will return the value of an environment variable, or a default value
 * if the variable is undefined.
 */
function envOrDefault(key: string, defaultValue: string): string {
    return process.env[key] || defaultValue;
}


const cookieSecret = process.env['COOKIES_SECRET'];

const port = envOrDefault('APP_PORT', '8000');

const channelName = envOrDefault('CHANNEL_NAME', 'mychannel');
const assetChaincodeName = envOrDefault('ASSET_CHAINCODE_NAME', 'asset_basic');
const userChaincodeName = envOrDefault('USER_CHAINCODE_NAME', 'user_basic');

const mspId = envOrDefault('MSP_ID', 'Org1MSP');

// Path to crypto materials.
const cryptoPath = envOrDefault('CRYPTO_PATH', path.resolve(__dirname, '..', '..', '..', '..', 'test-network', 'organizations', 'peerOrganizations', 'org1.example.com'));

// Path to user private key directory.
const keyDirectoryPath = envOrDefault('KEY_DIRECTORY_PATH', path.resolve(cryptoPath, 'users', 'User1@org1.example.com', 'msp', 'keystore'));

// Path to user certificate.
const certPath = envOrDefault('CERT_PATH', path.resolve(cryptoPath, 'users', 'User1@org1.example.com', 'msp', 'signcerts', 'cert.pem'));

// Path to peer tls certificate.
const tlsCertPath = envOrDefault('TLS_CERT_PATH', path.resolve(cryptoPath, 'peers', 'peer0.org1.example.com', 'tls', 'ca.crt'));

// Gateway peer endpoint.
const peerEndpoint = envOrDefault('PEER_ENDPOINT', 'localhost:7051');

// Gateway peer SSL host name override.
const peerHostAlias = envOrDefault('PEER_HOST_ALIAS', 'peer0.org1.example.com');

const config = {
    cookieSecret,
    port,
    channelName,
    assetChaincodeName,
    userChaincodeName,
    mspId,
    cryptoPath,
    keyDirectoryPath,
    certPath,
    tlsCertPath,
    peerEndpoint,
    peerHostAlias,
}

export default config;
